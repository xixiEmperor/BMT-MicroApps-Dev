# ğŸš€ BMTé¡¹ç›®éƒ¨ç½²é…ç½®æ¸…å•

## âš ï¸ å¿…é¡»ä¿®æ”¹çš„é…ç½®ä¿¡æ¯

### 1. ç¯å¢ƒå˜é‡é…ç½® (`.env` æ–‡ä»¶)

**ğŸ”´ å¿…é¡»ä¿®æ”¹çš„é…ç½®ï¼š**
```bash
# æ•°æ®åº“å¯†ç  - æ”¹ä¸ºå¼ºå¯†ç 
POSTGRES_PASSWORD=your_secure_db_password_here
# å»ºè®®ï¼šè‡³å°‘12ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦

# Rediså¯†ç  - æ”¹ä¸ºå¼ºå¯†ç   
REDIS_PASSWORD=your_secure_redis_password_here
# å»ºè®®ï¼šè‡³å°‘12ä½éšæœºå­—ç¬¦ä¸²

# JWTå¯†é’¥ - æ”¹ä¸º32ä½ä»¥ä¸Šéšæœºå­—ç¬¦ä¸²
JWT_SECRET=your_super_secret_jwt_key_here_min_32_chars
# å»ºè®®ï¼šä½¿ç”¨ openssl rand -base64 32 ç”Ÿæˆ

# åŸŸåé…ç½® - æ”¹ä¸ºæ‚¨çš„å®é™…åŸŸå
PROJECT_DOMAIN=your-domain.com
# å¦‚æœåªæ˜¯æœ¬åœ°æµ‹è¯•ï¼Œå¯ä»¥ä¿æŒ localhost
```

**ğŸ”¶ å¯é€‰ä¿®æ”¹çš„é…ç½®ï¼š**
```bash
# é¡¹ç›®åç§°ï¼ˆå½±å“å®¹å™¨åç§°å‰ç¼€ï¼‰
COMPOSE_PROJECT_NAME=bmt-microapps

# CORSè·¨åŸŸé…ç½®
CORS_ORIGIN=http://localhost,https://your-domain.com

# é‚®ä»¶æœåŠ¡ï¼ˆå¦‚æœéœ€è¦å‘é‚®ä»¶åŠŸèƒ½ï¼‰
SMTP_HOST=smtp.example.com
SMTP_USER=noreply@your-domain.com
SMTP_PASSWORD=your_smtp_password

# å¾®ä¿¡/æ”¯ä»˜å®ï¼ˆå¦‚æœéœ€è¦æ”¯ä»˜åŠŸèƒ½ï¼‰
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret
ALIPAY_APP_ID=your_alipay_app_id
```

### 2. NginxåŸŸåé…ç½®

**æ–‡ä»¶ä½ç½®**: `nginx/conf.d/app.conf`

**éœ€è¦ä¿®æ”¹çš„è¡Œ**:
```nginx
# ç¬¬19è¡Œï¼šå°† your-domain.com æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åŸŸå
server_name localhost your-domain.com;
```

å¦‚æœåªæ˜¯æœ¬åœ°æµ‹è¯•ï¼Œä¿æŒ `localhost` å³å¯ã€‚

## ğŸ› ï¸ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥éƒ¨ç½²ç›®å½•
cd integrated-deployment

# 2. åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
copy env.example .env

# 3. ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹ä¸Šè¿°å¿…é¡»é…ç½®é¡¹
notepad .env

# 4. è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
quick-deploy.bat
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
copy env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# 2. æ„å»ºå‰ç«¯é¡¹ç›®
cd ..
npm run build
cd BadmintonFrontend-B && npm run build && cd ..

# 3. å¤åˆ¶æ„å»ºäº§ç‰©
mkdir integrated-deployment\dist\admin
xcopy /E /Y dist\* integrated-deployment\dist\
xcopy /E /Y BadmintonFrontend-B\dist\* integrated-deployment\dist\admin\

# 4. å¯åŠ¨æœåŠ¡
cd integrated-deployment
docker-compose up -d
```

## âœ… éƒ¨ç½²åéªŒè¯

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ä»¥ä¸‹åœ°å€éªŒè¯ï¼š

- **å‰ç«¯é¡µé¢**: http://localhost
- **ç®¡ç†åå°**: http://localhost/admin
- **APIå¥åº·æ£€æŸ¥**: http://localhost/health
- **æœåŠ¡çŠ¶æ€**: `docker-compose ps`

## ğŸ”§ ç”Ÿæˆå¼ºå¯†ç çš„æ–¹æ³•

### Windows PowerShell
```powershell
# ç”Ÿæˆ32ä½éšæœºå¯†ç 
[System.Web.Security.Membership]::GeneratePassword(32, 8)

# æˆ–ä½¿ç”¨è¿™ä¸ª
-join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | % {[char]$_})
```

### åœ¨çº¿ç”Ÿæˆå™¨
- https://www.random.org/passwords/
- https://passwordsgenerator.net/

### å»ºè®®çš„å®‰å…¨é…ç½®
```bash
# æ•°æ®åº“å¯†ç ç¤ºä¾‹
POSTGRES_PASSWORD=Bmt2024!@#DbPass789

# Rediså¯†ç ç¤ºä¾‹  
REDIS_PASSWORD=Redis!Secure@Pass#2024

# JWTå¯†é’¥ç¤ºä¾‹
JWT_SECRET=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9bmV3c2VjcmV0a2V5
```

## ğŸš¨ å®‰å…¨æé†’

1. **æ°¸è¿œä¸è¦**å°† `.env` æ–‡ä»¶æäº¤åˆ°Gitä»“åº“
2. **ç”Ÿäº§ç¯å¢ƒ**å¿…é¡»ä½¿ç”¨HTTPSå’Œå¼ºå¯†ç 
3. **å®šæœŸæ›´æ¢**æ•°æ®åº“å’ŒRediså¯†ç 
4. **å¤‡ä»½é‡è¦æ•°æ®**åˆ°å®‰å…¨çš„åœ°æ–¹

## ğŸ†˜ å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šDockerå¯åŠ¨å¤±è´¥
**è§£å†³**ï¼šç¡®ä¿Docker Desktopæ­£åœ¨è¿è¡Œ

### é—®é¢˜2ï¼šç«¯å£è¢«å ç”¨
**è§£å†³**ï¼š
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :80
# åœæ­¢å ç”¨ç«¯å£çš„ç¨‹åºæˆ–ä¿®æ”¹docker-compose.ymlä¸­çš„ç«¯å£æ˜ å°„
```

### é—®é¢˜3ï¼šå‰ç«¯æ„å»ºå¤±è´¥
**è§£å†³**ï¼š
```bash
# æ¸…ç†node_modulesé‡æ–°å®‰è£…
rm -rf node_modules
npm install
npm run build
```

### é—®é¢˜4ï¼šæƒé™é—®é¢˜
**è§£å†³**ï¼šä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦

---

**å®Œæˆè¿™äº›é…ç½®åï¼Œæ‚¨å°±å¯ä»¥æˆåŠŸéƒ¨ç½²BMTç¾½æ¯›çƒåœºé¦†ç®¡ç†ç³»ç»Ÿäº†ï¼** ğŸ‰

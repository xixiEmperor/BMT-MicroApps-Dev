import{b,b3 as P,b4 as T,b5 as A,u as v,E as _,Y as h,r as y,L as k,q as p,i as d,l as E,P as L,Q as B,M,N as U,T as c}from"./index-Ba57xZaz.js";import{_ as C}from"./_plugin-vue_export-helper-DedD7E0N.js";const S=b();let f=!1;P({baseURL:"http://localhost:8080",timeout:1e4,plugins:[T({getToken:()=>localStorage.getItem("token"),onTokenExpired:()=>{if(f)return;f=!0,v().userinfo.token?(_.warning("登录已过期，请重新登录"),v().logout()):_.warning("请先登录");const i=S.currentRoute.value.fullPath;i!=="/login"&&S.push({path:"/login",query:{redirect:i}}),setTimeout(()=>{f=!1},1e3)}})]});const Q=r=>h({url:"/api/auth/send-code",method:"post",data:r}),Y=r=>h({url:"/api/auth/register",method:"post",data:r}),z=r=>A.post("/api/auth/login",r),G=r=>h({url:"/api/auth/reset-password",method:"post",data:r}),K={class:"verification-code-input"},N={class:"code-inputs"},j=["onUpdate:modelValue","onInput","onKeydown"],q={__name:"VerificationCodeInput",props:{modelValue:{type:String,default:""},length:{type:Number,default:6}},emits:["update:modelValue"],setup(r,{expose:i,emit:g}){const u=r,w=g,l=y(Array(u.length).fill("")),n=y([]),V=(e,s)=>{e&&(n.value[s]=e)};k(()=>u.modelValue,e=>{e!==l.value.join("")&&(l.value=e.split("").concat(Array(u.length).fill("")).slice(0,u.length))},{immediate:!0}),k(l,e=>{const s=e.join("");w("update:modelValue",s)},{deep:!0});const D=(e,s)=>{const t=s.replace(/\D/g,"");l.value[e]=t,t&&e<u.length-1&&c(()=>{var o;(o=n.value[e+1])==null||o.focus()})},I=(e,s)=>{s.key==="Backspace"&&!l.value[e]&&e>0?c(()=>{var t;(t=n.value[e-1])==null||t.focus()}):s.key==="ArrowLeft"&&e>0?c(()=>{var t;(t=n.value[e-1])==null||t.focus()}):s.key==="ArrowRight"&&e<u.length-1&&c(()=>{var t;(t=n.value[e+1])==null||t.focus()})},R=e=>{e.preventDefault();const t=e.clipboardData.getData("text").replace(/\D/g,"").split("").slice(0,u.length);t.forEach((a,m)=>{m<u.length&&(l.value[m]=a)});const o=Math.min(t.length-1,u.length-1);c(()=>{var a;(a=n.value[o])==null||a.focus()})};return i({focus:()=>{var e;(e=n.value[0])==null||e.focus()},clear:()=>{var e;l.value=Array(u.length).fill(""),(e=n.value[0])==null||e.focus()}}),(e,s)=>(d(),p("div",K,[E("div",N,[(d(!0),p(L,null,B(l.value,(t,o)=>M((d(),p("input",{key:o,"onUpdate:modelValue":a=>l.value[o]=a,ref_for:!0,ref:a=>V(a,o),maxlength:"1",class:"code-digit",onInput:a=>D(o,a.target.value),onKeydown:a=>I(o,a),onPaste:R,type:"text",inputmode:"numeric",pattern:"[0-9]*"},null,40,j)),[[U,l.value[o]]])),128))])]))}},J=C(q,[["__scopeId","data-v-d1422850"]]);export{J as V,Q as a,Y as b,z as c,G as d};
